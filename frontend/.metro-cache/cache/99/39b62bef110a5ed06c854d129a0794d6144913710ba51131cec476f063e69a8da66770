{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../services/LocalImageService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":80,"index":114}}],"key":"gdgC7SoT1XMFu9xTY3BRc9degjc=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useImageStore\", {\n    enumerable: true,\n    get: function () {\n      return useImageStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _servicesLocalImageService = require(_dependencyMap[1], \"../services/LocalImageService\");\n  const useImageStore = (0, _zustand.create)((set, get) => ({\n    isLoaded: false,\n    stats: {\n      totalImages: 0,\n      totalSizeBytes: 0,\n      totalSizeMB: '0.00',\n      oldestImage: null\n    },\n    cleanupInterval: 90,\n    initialize: async () => {\n      try {\n        await _servicesLocalImageService.LocalImageService.initialize();\n        const stats = await _servicesLocalImageService.LocalImageService.getStorageStats();\n        const interval = await _servicesLocalImageService.LocalImageService.getCleanupInterval();\n        set({\n          isLoaded: true,\n          stats,\n          cleanupInterval: interval\n        });\n      } catch (error) {\n        console.error('Error initializing image store:', error);\n        set({\n          isLoaded: true\n        });\n      }\n    },\n    saveImage: async sourceUri => {\n      const localImageId = await _servicesLocalImageService.LocalImageService.saveImage(sourceUri);\n      // Refresh stats after saving\n      const stats = await _servicesLocalImageService.LocalImageService.getStorageStats();\n      set({\n        stats\n      });\n      return localImageId;\n    },\n    saveImageFromBase64: async (base64Data, extension = 'jpg') => {\n      const localImageId = await _servicesLocalImageService.LocalImageService.saveImageFromBase64(base64Data, extension);\n      // Refresh stats after saving\n      const stats = await _servicesLocalImageService.LocalImageService.getStorageStats();\n      set({\n        stats\n      });\n      return localImageId;\n    },\n    getImage: async id => {\n      return await _servicesLocalImageService.LocalImageService.getImageAsBase64(id);\n    },\n    getImageUri: async id => {\n      return await _servicesLocalImageService.LocalImageService.getImageUri(id);\n    },\n    deleteImage: async id => {\n      const result = await _servicesLocalImageService.LocalImageService.deleteImage(id);\n      if (result) {\n        // Refresh stats after deleting\n        const stats = await _servicesLocalImageService.LocalImageService.getStorageStats();\n        set({\n          stats\n        });\n      }\n      return result;\n    },\n    cleanupOldImages: async () => {\n      const {\n        cleanupInterval\n      } = get();\n      const deletedCount = await _servicesLocalImageService.LocalImageService.cleanupOldImages(cleanupInterval);\n      // Refresh stats after cleanup\n      const stats = await _servicesLocalImageService.LocalImageService.getStorageStats();\n      set({\n        stats\n      });\n      return deletedCount;\n    },\n    clearAllImages: async () => {\n      const deletedCount = await _servicesLocalImageService.LocalImageService.clearAllImages();\n      // Reset stats after clearing\n      set({\n        stats: {\n          totalImages: 0,\n          totalSizeBytes: 0,\n          totalSizeMB: '0.00',\n          oldestImage: null\n        }\n      });\n      return deletedCount;\n    },\n    refreshStats: async () => {\n      const stats = await _servicesLocalImageService.LocalImageService.getStorageStats();\n      set({\n        stats\n      });\n    },\n    getCleanupInterval: async () => {\n      const interval = await _servicesLocalImageService.LocalImageService.getCleanupInterval();\n      set({\n        cleanupInterval: interval\n      });\n      return interval;\n    },\n    setCleanupInterval: async days => {\n      await _servicesLocalImageService.LocalImageService.setCleanupInterval(days);\n      set({\n        cleanupInterval: days\n      });\n    },\n    imageExists: async id => {\n      return await _servicesLocalImageService.LocalImageService.imageExists(id);\n    }\n  }));\n});","lineCount":124,"map":[[7,2,25,0,"Object"],[7,8,25,0],[7,9,25,0,"defineProperty"],[7,23,25,0],[7,24,25,0,"exports"],[7,31,25,0],[8,4,25,0,"enumerable"],[8,14,25,0],[9,4,25,0,"get"],[9,7,25,0],[9,18,25,0,"get"],[9,19,25,0],[10,6,25,0],[10,13,25,0,"useImageStore"],[10,26,25,0],[11,4,25,0],[12,2,25,0],[13,2,1,0],[13,6,1,0,"_zustand"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,2,0],[14,6,2,0,"_servicesLocalImageService"],[14,32,2,0],[14,35,2,0,"require"],[14,42,2,0],[14,43,2,0,"_dependencyMap"],[14,57,2,0],[15,2,25,7],[15,8,25,13,"useImageStore"],[15,21,25,26],[15,24,25,29],[15,28,25,29,"create"],[15,36,25,35],[15,37,25,35,"create"],[15,43,25,35],[15,45,25,48],[15,46,25,49,"set"],[15,49,25,52],[15,51,25,54,"get"],[15,54,25,57],[15,60,25,63],[16,4,26,2,"isLoaded"],[16,12,26,10],[16,14,26,12],[16,19,26,17],[17,4,27,2,"stats"],[17,9,27,7],[17,11,27,9],[18,6,28,4,"totalImages"],[18,17,28,15],[18,19,28,17],[18,20,28,18],[19,6,29,4,"totalSizeBytes"],[19,20,29,18],[19,22,29,20],[19,23,29,21],[20,6,30,4,"totalSizeMB"],[20,17,30,15],[20,19,30,17],[20,25,30,23],[21,6,31,4,"oldestImage"],[21,17,31,15],[21,19,31,17],[22,4,32,2],[22,5,32,3],[23,4,33,2,"cleanupInterval"],[23,19,33,17],[23,21,33,19],[23,23,33,21],[24,4,35,2,"initialize"],[24,14,35,12],[24,16,35,14],[24,22,35,14,"initialize"],[24,23,35,14],[24,28,35,26],[25,6,36,4],[25,10,36,8],[26,8,37,6],[26,14,37,12,"LocalImageService"],[26,40,37,29],[26,41,37,29,"LocalImageService"],[26,58,37,29],[26,59,37,30,"initialize"],[26,69,37,40],[26,70,37,41],[26,71,37,42],[27,8,38,6],[27,14,38,12,"stats"],[27,19,38,17],[27,22,38,20],[27,28,38,26,"LocalImageService"],[27,54,38,43],[27,55,38,43,"LocalImageService"],[27,72,38,43],[27,73,38,44,"getStorageStats"],[27,88,38,59],[27,89,38,60],[27,90,38,61],[28,8,39,6],[28,14,39,12,"interval"],[28,22,39,20],[28,25,39,23],[28,31,39,29,"LocalImageService"],[28,57,39,46],[28,58,39,46,"LocalImageService"],[28,75,39,46],[28,76,39,47,"getCleanupInterval"],[28,94,39,65],[28,95,39,66],[28,96,39,67],[29,8,40,6,"set"],[29,11,40,9],[29,12,40,10],[30,10,40,12,"isLoaded"],[30,18,40,20],[30,20,40,22],[30,24,40,26],[31,10,40,28,"stats"],[31,15,40,33],[32,10,40,35,"cleanupInterval"],[32,25,40,50],[32,27,40,52,"interval"],[33,8,40,61],[33,9,40,62],[33,10,40,63],[34,6,41,4],[34,7,41,5],[34,8,41,6],[34,15,41,13,"error"],[34,20,41,18],[34,22,41,20],[35,8,42,6,"console"],[35,15,42,13],[35,16,42,14,"error"],[35,21,42,19],[35,22,42,20],[35,55,42,53],[35,57,42,55,"error"],[35,62,42,60],[35,63,42,61],[36,8,43,6,"set"],[36,11,43,9],[36,12,43,10],[37,10,43,12,"isLoaded"],[37,18,43,20],[37,20,43,22],[38,8,43,27],[38,9,43,28],[38,10,43,29],[39,6,44,4],[40,4,45,2],[40,5,45,3],[41,4,47,2,"saveImage"],[41,13,47,11],[41,15,47,13],[41,21,47,20,"sourceUri"],[41,30,47,37],[41,34,47,42],[42,6,48,4],[42,12,48,10,"localImageId"],[42,24,48,22],[42,27,48,25],[42,33,48,31,"LocalImageService"],[42,59,48,48],[42,60,48,48,"LocalImageService"],[42,77,48,48],[42,78,48,49,"saveImage"],[42,87,48,58],[42,88,48,59,"sourceUri"],[42,97,48,68],[42,98,48,69],[43,6,49,4],[44,6,50,4],[44,12,50,10,"stats"],[44,17,50,15],[44,20,50,18],[44,26,50,24,"LocalImageService"],[44,52,50,41],[44,53,50,41,"LocalImageService"],[44,70,50,41],[44,71,50,42,"getStorageStats"],[44,86,50,57],[44,87,50,58],[44,88,50,59],[45,6,51,4,"set"],[45,9,51,7],[45,10,51,8],[46,8,51,10,"stats"],[47,6,51,16],[47,7,51,17],[47,8,51,18],[48,6,52,4],[48,13,52,11,"localImageId"],[48,25,52,23],[49,4,53,2],[49,5,53,3],[50,4,55,2,"saveImageFromBase64"],[50,23,55,21],[50,25,55,23],[50,31,55,23,"saveImageFromBase64"],[50,32,55,30,"base64Data"],[50,42,55,48],[50,44,55,50,"extension"],[50,53,55,67],[50,56,55,70],[50,61,55,75],[50,66,55,80],[51,6,56,4],[51,12,56,10,"localImageId"],[51,24,56,22],[51,27,56,25],[51,33,56,31,"LocalImageService"],[51,59,56,48],[51,60,56,48,"LocalImageService"],[51,77,56,48],[51,78,56,49,"saveImageFromBase64"],[51,97,56,68],[51,98,56,69,"base64Data"],[51,108,56,79],[51,110,56,81,"extension"],[51,119,56,90],[51,120,56,91],[52,6,57,4],[53,6,58,4],[53,12,58,10,"stats"],[53,17,58,15],[53,20,58,18],[53,26,58,24,"LocalImageService"],[53,52,58,41],[53,53,58,41,"LocalImageService"],[53,70,58,41],[53,71,58,42,"getStorageStats"],[53,86,58,57],[53,87,58,58],[53,88,58,59],[54,6,59,4,"set"],[54,9,59,7],[54,10,59,8],[55,8,59,10,"stats"],[56,6,59,16],[56,7,59,17],[56,8,59,18],[57,6,60,4],[57,13,60,11,"localImageId"],[57,25,60,23],[58,4,61,2],[58,5,61,3],[59,4,63,2,"getImage"],[59,12,63,10],[59,14,63,12],[59,20,63,19,"id"],[59,22,63,29],[59,26,63,34],[60,6,64,4],[60,13,64,11],[60,19,64,17,"LocalImageService"],[60,45,64,34],[60,46,64,34,"LocalImageService"],[60,63,64,34],[60,64,64,35,"getImageAsBase64"],[60,80,64,51],[60,81,64,52,"id"],[60,83,64,54],[60,84,64,55],[61,4,65,2],[61,5,65,3],[62,4,67,2,"getImageUri"],[62,15,67,13],[62,17,67,15],[62,23,67,22,"id"],[62,25,67,32],[62,29,67,37],[63,6,68,4],[63,13,68,11],[63,19,68,17,"LocalImageService"],[63,45,68,34],[63,46,68,34,"LocalImageService"],[63,63,68,34],[63,64,68,35,"getImageUri"],[63,75,68,46],[63,76,68,47,"id"],[63,78,68,49],[63,79,68,50],[64,4,69,2],[64,5,69,3],[65,4,71,2,"deleteImage"],[65,15,71,13],[65,17,71,15],[65,23,71,22,"id"],[65,25,71,32],[65,29,71,37],[66,6,72,4],[66,12,72,10,"result"],[66,18,72,16],[66,21,72,19],[66,27,72,25,"LocalImageService"],[66,53,72,42],[66,54,72,42,"LocalImageService"],[66,71,72,42],[66,72,72,43,"deleteImage"],[66,83,72,54],[66,84,72,55,"id"],[66,86,72,57],[66,87,72,58],[67,6,73,4],[67,10,73,8,"result"],[67,16,73,14],[67,18,73,16],[68,8,74,6],[69,8,75,6],[69,14,75,12,"stats"],[69,19,75,17],[69,22,75,20],[69,28,75,26,"LocalImageService"],[69,54,75,43],[69,55,75,43,"LocalImageService"],[69,72,75,43],[69,73,75,44,"getStorageStats"],[69,88,75,59],[69,89,75,60],[69,90,75,61],[70,8,76,6,"set"],[70,11,76,9],[70,12,76,10],[71,10,76,12,"stats"],[72,8,76,18],[72,9,76,19],[72,10,76,20],[73,6,77,4],[74,6,78,4],[74,13,78,11,"result"],[74,19,78,17],[75,4,79,2],[75,5,79,3],[76,4,81,2,"cleanupOldImages"],[76,20,81,18],[76,22,81,20],[76,28,81,20,"cleanupOldImages"],[76,29,81,20],[76,34,81,32],[77,6,82,4],[77,12,82,10],[78,8,82,12,"cleanupInterval"],[79,6,82,28],[79,7,82,29],[79,10,82,32,"get"],[79,13,82,35],[79,14,82,36],[79,15,82,37],[80,6,83,4],[80,12,83,10,"deletedCount"],[80,24,83,22],[80,27,83,25],[80,33,83,31,"LocalImageService"],[80,59,83,48],[80,60,83,48,"LocalImageService"],[80,77,83,48],[80,78,83,49,"cleanupOldImages"],[80,94,83,65],[80,95,83,66,"cleanupInterval"],[80,110,83,81],[80,111,83,82],[81,6,84,4],[82,6,85,4],[82,12,85,10,"stats"],[82,17,85,15],[82,20,85,18],[82,26,85,24,"LocalImageService"],[82,52,85,41],[82,53,85,41,"LocalImageService"],[82,70,85,41],[82,71,85,42,"getStorageStats"],[82,86,85,57],[82,87,85,58],[82,88,85,59],[83,6,86,4,"set"],[83,9,86,7],[83,10,86,8],[84,8,86,10,"stats"],[85,6,86,16],[85,7,86,17],[85,8,86,18],[86,6,87,4],[86,13,87,11,"deletedCount"],[86,25,87,23],[87,4,88,2],[87,5,88,3],[88,4,90,2,"clearAllImages"],[88,18,90,16],[88,20,90,18],[88,26,90,18,"clearAllImages"],[88,27,90,18],[88,32,90,30],[89,6,91,4],[89,12,91,10,"deletedCount"],[89,24,91,22],[89,27,91,25],[89,33,91,31,"LocalImageService"],[89,59,91,48],[89,60,91,48,"LocalImageService"],[89,77,91,48],[89,78,91,49,"clearAllImages"],[89,92,91,63],[89,93,91,64],[89,94,91,65],[90,6,92,4],[91,6,93,4,"set"],[91,9,93,7],[91,10,93,8],[92,8,94,6,"stats"],[92,13,94,11],[92,15,94,13],[93,10,95,8,"totalImages"],[93,21,95,19],[93,23,95,21],[93,24,95,22],[94,10,96,8,"totalSizeBytes"],[94,24,96,22],[94,26,96,24],[94,27,96,25],[95,10,97,8,"totalSizeMB"],[95,21,97,19],[95,23,97,21],[95,29,97,27],[96,10,98,8,"oldestImage"],[96,21,98,19],[96,23,98,21],[97,8,99,6],[98,6,100,4],[98,7,100,5],[98,8,100,6],[99,6,101,4],[99,13,101,11,"deletedCount"],[99,25,101,23],[100,4,102,2],[100,5,102,3],[101,4,104,2,"refreshStats"],[101,16,104,14],[101,18,104,16],[101,24,104,16,"refreshStats"],[101,25,104,16],[101,30,104,28],[102,6,105,4],[102,12,105,10,"stats"],[102,17,105,15],[102,20,105,18],[102,26,105,24,"LocalImageService"],[102,52,105,41],[102,53,105,41,"LocalImageService"],[102,70,105,41],[102,71,105,42,"getStorageStats"],[102,86,105,57],[102,87,105,58],[102,88,105,59],[103,6,106,4,"set"],[103,9,106,7],[103,10,106,8],[104,8,106,10,"stats"],[105,6,106,16],[105,7,106,17],[105,8,106,18],[106,4,107,2],[106,5,107,3],[107,4,109,2,"getCleanupInterval"],[107,22,109,20],[107,24,109,22],[107,30,109,22,"getCleanupInterval"],[107,31,109,22],[107,36,109,34],[108,6,110,4],[108,12,110,10,"interval"],[108,20,110,18],[108,23,110,21],[108,29,110,27,"LocalImageService"],[108,55,110,44],[108,56,110,44,"LocalImageService"],[108,73,110,44],[108,74,110,45,"getCleanupInterval"],[108,92,110,63],[108,93,110,64],[108,94,110,65],[109,6,111,4,"set"],[109,9,111,7],[109,10,111,8],[110,8,111,10,"cleanupInterval"],[110,23,111,25],[110,25,111,27,"interval"],[111,6,111,36],[111,7,111,37],[111,8,111,38],[112,6,112,4],[112,13,112,11,"interval"],[112,21,112,19],[113,4,113,2],[113,5,113,3],[114,4,115,2,"setCleanupInterval"],[114,22,115,20],[114,24,115,22],[114,30,115,29,"days"],[114,34,115,41],[114,38,115,46],[115,6,116,4],[115,12,116,10,"LocalImageService"],[115,38,116,27],[115,39,116,27,"LocalImageService"],[115,56,116,27],[115,57,116,28,"setCleanupInterval"],[115,75,116,46],[115,76,116,47,"days"],[115,80,116,51],[115,81,116,52],[116,6,117,4,"set"],[116,9,117,7],[116,10,117,8],[117,8,117,10,"cleanupInterval"],[117,23,117,25],[117,25,117,27,"days"],[118,6,117,32],[118,7,117,33],[118,8,117,34],[119,4,118,2],[119,5,118,3],[120,4,120,2,"imageExists"],[120,15,120,13],[120,17,120,15],[120,23,120,22,"id"],[120,25,120,32],[120,29,120,37],[121,6,121,4],[121,13,121,11],[121,19,121,17,"LocalImageService"],[121,45,121,34],[121,46,121,34,"LocalImageService"],[121,63,121,34],[121,64,121,35,"imageExists"],[121,75,121,46],[121,76,121,47,"id"],[121,78,121,49],[121,79,121,50],[122,4,122,2],[123,2,123,0],[123,3,123,1],[123,4,123,2],[123,5,123,3],[124,0,123,4],[124,3]],"functionMap":{"names":["<global>","create$argument_0","initialize","saveImage","saveImageFromBase64","getImage","getImageUri","deleteImage","cleanupOldImages","clearAllImages","refreshStats","getCleanupInterval","setCleanupInterval","imageExists"],"mappings":"AAA;gDCwB;cCU;GDU;aEE;GFM;uBGE;GHM;YIE;GJE;eKE;GLE;eME;GNQ;oBOE;GPO;kBQE;GRY;gBSE;GTG;sBUE;GVI;sBWE;GXG;eYE;GZE;EDC"},"hasCjsExports":false},"type":"js/module"}]}